<?xml version="1.0" encoding="utf-8"?>
<odoo>


    <template id="custom_quotation_report">
        <t t-call="web.external_layout">
            <!-- CSS trực tiếp -->
            <style>
                * {
                padding: 0;
                margin: 0;
                box-sizing: border-box;
                }
                .container-123 {
                display: flex;
                position: relative;
                z-index: 1;
                min-height: 100px;
                background-color: white;
                overflow: hidden;
                }
                .container-123::before {
                content: '';
                position: absolute;
                inset: 0;
                z-index: -1;
                background-color: red;
                transform: skewX(-50deg) translateX(-50%);
                }
                .column-1 {
                flex-basis: 60%;
                }
                .column-2 {
                flex-basis: 40%;
                }
            </style>
            <div class="container-custom-quotation-report">
                <div class="row">
                    <div class="header-background-building" style="text-align: center;">
                        <t t-if="o.order_line.product_id.building_parent_id.image_1024">
                            <t t-set="background_image_1024"
                               t-value="o.order_line.product_id.building_parent_id.image_1024.decode('utf-8')"/>
                            <img t-att-src="'data:image/png;base64,%s' % background_image_1024" class="floor-img"/>
                        </t>
                    </div>
                    <div class="col-1"></div>
                    <div class="col-6">
                        <div class="property-section">
                            <h2 class="section-title">Property Features:</h2>
                            <p>
                                <strong>Location:</strong>
                                <t t-esc="o.order_line.product_id.location or '...'"/>
                            </p>
                            <p>
                                <strong>Type:</strong>
                                Office Building
                            </p>
                            <p>
                                <strong>Area:</strong>
                                <t t-esc="o.order_line.product_id.area or '...'"/>
                            </p>
                            <p>
                                <strong>Occupancy Rate:</strong>
                                <span>100%</span>
                            </p>
                            <p>
                                <strong>Average Rent:</strong>
                                US$
                                <span>100/sqm/month</span>
                            </p>
                            <p>
                                <strong>Annual Income:</strong>
                                US$
                                <span>100/month</span>
                            </p>
                            <p>
                                <strong>Green Certificate:</strong>
                                <span>abcxyz</span>
                            </p>
                        </div>
                        <!-- Additional Information -->
                        <div class="additional-info">
                            <h2 class="section-title">Additional Information:</h2>
                            <p>
                                <t t-esc="o.note or 'No additional information available.'"/>
                            </p>
                        </div>
                    </div>
                    <div class="col-4">
                        <div class="header-background-building" style="">
                            <t t-if="o.order_line.product_id.building_parent_id.image_1024">
                                <t t-set="background_image_1024"
                                   t-value="o.order_line.product_id.building_parent_id.image_1024.decode('utf-8')"/>
                                <img t-att-src="'data:image/png;base64,%s' % background_image_1024" class="floor-img"/>
                            </t>
                        </div>
                        <p>
                            <strong>Area:</strong>
                            <t t-esc="o.order_line.product_id.area or '...'"/>
                        </p>
                        <p>
                            <strong>Occupancy Rate:</strong>
                            <span>100%</span>
                        </p>
                        <p>
                            <strong>Average Rent:</strong>
                            US$
                            <span>100/sqm/month</span>
                        </p>
                    </div>
                    <div class="col-1"></div>
                </div>
                <div class="row contact-info" style="display: flex">
                    <div class="col-1"></div>
                    <div class="col-10 container-123">
                        <div class="column-1">
                            <div class="contact-section">
                                <div class="contact-box">
                                    <h3>Contact:</h3>
                                    <p>
                                        <strong>Hotline:</strong>
                                        <t t-esc="o.company_id.phone or '...'"/>
                                    </p>
                                    <p>
                                        <strong>Website:</strong>
                                        <t t-esc="o.company_id.website or '...'"/>
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="column-2">
                            <p class="office-location">
                                <strong>Office:</strong>
                                <span>Ho Chi Minh City, Vietnam</span>
                            </p>
                        </div>
                    </div>
                </div>

            </div>
        </t>
    </template>


    <template id="custom_so_retail_report">
        <t t-call="web.html_container">
            <t t-if="docs">
                <t t-foreach="docs.sale_order_id" t-as="o">
                    <t t-call="nai_crm.custom_quotation_report" t-lang="o.partner_id.lang"/>
                </t>
            </t>
            <t t-else="">
                <span>⚠️ Không có dữ liệu</span>
            </t>
        </t>
    </template>

    <record id="action_custom_quotation_report" model="ir.actions.report">
        <field name="name">Custom Quotation Report</field>
        <field name="model">popup.select.fields.report</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">nai_crm.custom_so_retail_report</field>
        <field name="report_file">nai_crm.custom_so_retail_report</field>
        <field name="binding_model_id" ref="nai_crm.model_popup_select_fields_report"/>
        <field name="binding_type">report</field>
    </record>

</odoo>
